<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <title>2æ¡ã®è¶³ã—ç®—ã‚¯ã‚¤ã‚º</title>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7f6;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        #quiz-area {
            margin-top: 20px;
        }

        #question {
            font-size: 2em;
            margin-bottom: 15px;
            color: #007bff;
            font-weight: bold;
        }

        #answer-input {
            padding: 10px;
            font-size: 1.2em;
            width: 80%;
            margin-bottom: 15px;
            border: 2px solid #ccc;
            border-radius: 5px;
            text-align: center;
        }

        #submit-button, #restart-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }

        #submit-button:hover, #restart-button:hover {
            background-color: #218838;
        }

        #message {
            margin-top: 10px;
            font-weight: bold;
            min-height: 1.2em; /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºé ˜åŸŸã‚’ç¢ºä¿ */
        }

        #result-area {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #e9ecef;
        }

        .hidden {
            display: none;
        }

        #score {
            font-size: 1.5em;
            color: #dc3545;
            font-weight: bold;
        }

        #current-question-count {
            margin-top: 20px;
            font-size: 1em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¢ 2æ¡ã®è¶³ã—ç®—ã‚¯ã‚¤ã‚º</h1>
        <div id="quiz-area">
            <p id="question">å•é¡Œã‚’ç”Ÿæˆä¸­ã§ã™...</p>
            <input type="number" id="answer-input" placeholder="ç­”ãˆã‚’å…¥åŠ›" min="0" required>
            <button id="submit-button">å›ç­”</button>
            <p id="message"></p>
        </div>

        <div id="result-area" class="hidden">
            <h2>ğŸ‰ çµæœç™ºè¡¨</h2>
            <p id="score"></p>
            <button id="restart-button">ã‚‚ã†ä¸€åº¦éŠã¶</button>
        </div>

        <p id="current-question-count">1 / 10 å•ç›®</p>
    </div>

    <script>
        // å®šæ•°ã¨å¤‰æ•°ã®è¨­å®š
        const MAX_QUESTIONS = 10; // å‡ºé¡Œæ•°
        const MIN_NUMBER = 10;    // 2æ¡ã®æœ€å°å€¤
        const MAX_NUMBER = 99;    // 2æ¡ã®æœ€å¤§å€¤

        let currentQuestion = 0; // ç¾åœ¨ã®å•é¡Œæ•° (0ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ)
        let score = 0;           // æ­£è§£æ•°
        let correctAnswer = 0;   // ç¾åœ¨ã®å•é¡Œã®æ­£è§£

        // DOMè¦ç´ ã®å–å¾—
        const questionElement = document.getElementById('question');
        const answerInput = document.getElementById('answer-input');
        const submitButton = document.getElementById('submit-button');
        const messageElement = document.getElementById('message');
        const quizArea = document.getElementById('quiz-area');
        const resultArea = document.getElementById('result-area');
        const scoreElement = document.getElementById('score');
        const restartButton = document.getElementById('restart-button');
        const countElement = document.getElementById('current-question-count');

        // ãƒ©ãƒ³ãƒ€ãƒ ãª2æ¡ã®æ•°ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function generateRandomNumber() {
            return Math.floor(Math.random() * (MAX_NUMBER - MIN_NUMBER + 1)) + MIN_NUMBER;
        }

        // æ–°ã—ã„å•é¡Œã‚’è¨­å®šã™ã‚‹é–¢æ•°
        function setNextQuestion() {
            currentQuestion++;

            if (currentQuestion > MAX_QUESTIONS) {
                // å…¨å•çµ‚äº†
                showResult();
                return;
            }

            // ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
            countElement.textContent = `${currentQuestion} / ${MAX_QUESTIONS} å•ç›®`;

            // 2ã¤ã®2æ¡ã®æ•°ã‚’ç”Ÿæˆ
            const num1 = generateRandomNumber();
            const num2 = generateRandomNumber();

            // æ­£è§£ã‚’è¨ˆç®—
            correctAnswer = num1 + num2;

            // å•é¡Œæ–‡ã‚’è¨­å®š
            questionElement.textContent = `${num1} + ${num2} = ?`;

            // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢
            answerInput.value = '';
            messageElement.textContent = '';
            answerInput.focus(); // å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
        }

        // å›ç­”ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
        function checkAnswer() {
            const userAnswer = parseInt(answerInput.value, 10);

            // å…¥åŠ›ãŒç©ºã€ã¾ãŸã¯æ•°å­—ã§ãªã„å ´åˆã¯è­¦å‘Š
            if (isNaN(userAnswer)) {
                messageElement.textContent = 'âš ï¸ æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                messageElement.style.color = '#ffc107';
                answerInput.focus();
                return;
            }

            // æ­£èª¤åˆ¤å®š
            if (userAnswer === correctAnswer) {
                score++;
                messageElement.textContent = 'â­•ï¸ æ­£è§£ã§ã™ï¼';
                messageElement.style.color = '#28a745';
            } else {
                messageElement.textContent = `âŒ ä¸æ­£è§£ã§ã™ã€‚ï¼ˆæ­£è§£: ${correctAnswer}ï¼‰`;
                messageElement.style.color = '#dc3545';
            }

            // 0.8ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
            submitButton.disabled = true; // ãƒœã‚¿ãƒ³ã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
            answerInput.disabled = true;  // å…¥åŠ›æ¬„ã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–

            setTimeout(() => {
                submitButton.disabled = false;
                answerInput.disabled = false;
                setNextQuestion();
            }, 800);
        }

        // çµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showResult() {
            quizArea.classList.add('hidden');
            resultArea.classList.remove('hidden');
            countElement.classList.add('hidden');
            
            scoreElement.textContent = `${MAX_QUESTIONS}å•ä¸­ã€${score}å•æ­£è§£ã—ã¾ã—ãŸï¼`;
            
            // ã‚¹ã‚³ã‚¢ã«å¿œã˜ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª¿æ•´
            if (score === MAX_QUESTIONS) {
                scoreElement.textContent += ' ç´ æ™´ã‚‰ã—ã„ï¼å…¨å•æ­£è§£ã§ã™ï¼ğŸ’¯';
            } else if (score >= MAX_QUESTIONS * 0.7) {
                scoreElement.textContent += ' ã‚ˆãã§ãã¾ã—ãŸï¼ğŸ‘';
            } else {
                scoreElement.textContent += ' ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ğŸ’ª';
            }
        }

        // ã‚²ãƒ¼ãƒ ã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™é–¢æ•°
        function initializeGame() {
            currentQuestion = 0;
            score = 0;
            
            quizArea.classList.remove('hidden');
            resultArea.classList.add('hidden');
            countElement.classList.remove('hidden');
            messageElement.textContent = '';

            setNextQuestion();
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        submitButton.addEventListener('click', checkAnswer);
        restartButton.addEventListener('click', initializeGame);

        // Enterã‚­ãƒ¼ã§ã®å›ç­”é€ä¿¡ã‚’å¯èƒ½ã«ã™ã‚‹
        answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        initializeGame();
    </script>
</body>
</html>